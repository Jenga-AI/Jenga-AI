apiVersion: v1
kind: Secret
metadata:
  name: jengahub-secrets
  namespace: jengahub
  labels:
    app.kubernetes.io/name: jengahub
    app.kubernetes.io/component: secrets
type: Opaque
stringData:
  # Database credentials
  DB_PASSWORD: "jengahub_prod_password_change_me"
  DATABASE_URL: "postgresql://jengahub:jengahub_prod_password_change_me@jengahub-postgres:5432/jengahub"
  
  # Redis credentials
  REDIS_PASSWORD: "redis_prod_password_change_me"
  REDIS_URL: "redis://:redis_prod_password_change_me@jengahub-redis:6379/0"
  
  # API keys and tokens
  JENGAHUB_API_KEY: "jengahub_api_key_change_me"
  JENGAHUB_SECRET_KEY: "jengahub_secret_key_very_secure_change_me"
  JWT_SECRET_KEY: "jwt_secret_key_change_me"
  
  # External service credentials
  OPENAI_API_KEY: ""
  HUGGINGFACE_TOKEN: ""
  WANDB_API_KEY: ""
  
  # MLflow credentials
  MLFLOW_TRACKING_USERNAME: "mlflow"
  MLFLOW_TRACKING_PASSWORD: "mlflow_password_change_me"
  
  # Monitoring credentials
  GRAFANA_ADMIN_PASSWORD: "grafana_admin_password_change_me"
  PROMETHEUS_PASSWORD: "prometheus_password_change_me"

---
apiVersion: v1
kind: Secret
metadata:
  name: jengahub-tls-secret
  namespace: jengahub
  labels:
    app.kubernetes.io/name: jengahub
    app.kubernetes.io/component: tls
type: kubernetes.io/tls
data:
  # These should be replaced with actual certificate data
  # Generate with: kubectl create secret tls jengahub-tls-secret --cert=path/to/tls.cert --key=path/to/tls.key -n jengahub
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0t...  # Base64 encoded certificate
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0t...  # Base64 encoded private key

---
apiVersion: v1
kind: Secret
metadata:
  name: jengahub-registry-secret
  namespace: jengahub
  labels:
    app.kubernetes.io/name: jengahub
    app.kubernetes.io/component: registry
type: kubernetes.io/dockerconfigjson
data:
  # Docker registry credentials for pulling private images
  # Generate with: kubectl create secret docker-registry jengahub-registry-secret \
  #   --docker-server=<registry-server> \
  #   --docker-username=<username> \
  #   --docker-password=<password> \
  #   --docker-email=<email> -n jengahub
  .dockerconfigjson: eyJhdXRocyI6e319  # Base64 encoded docker config

---
# External Secrets Operator configuration (if using external secret management)
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: jengahub-secret-store
  namespace: jengahub
  labels:
    app.kubernetes.io/name: jengahub
    app.kubernetes.io/component: external-secrets
spec:
  provider:
    # Example: AWS Secrets Manager
    aws:
      service: SecretsManager
      region: "us-east-1"
      auth:
        jwt:
          serviceAccountRef:
            name: external-secrets-sa
    # Example: HashiCorp Vault
    # vault:
    #   server: "https://vault.example.com"
    #   path: "secret"
    #   version: "v2"
    #   auth:
    #     jwt:
    #       serviceAccount: "external-secrets-sa"
    # Example: Azure Key Vault
    # azurekv:
    #   vaultUrl: "https://jengahub-kv.vault.azure.net/"
    #   authType: "ServicePrincipal"
    #   clientId: "your-client-id"
    #   clientSecret:
    #     name: "azure-secret"
    #     key: "client-secret"

---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: jengahub-external-secrets
  namespace: jengahub
  labels:
    app.kubernetes.io/name: jengahub
    app.kubernetes.io/component: external-secrets
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: jengahub-secret-store
    kind: SecretStore
  target:
    name: jengahub-external-secrets
    creationPolicy: Owner
    template:
      engineVersion: v2
      data:
        DATABASE_URL: "postgresql://jengahub:{{ .db_password }}@jengahub-postgres:5432/jengahub"
        REDIS_URL: "redis://:{{ .redis_password }}@jengahub-redis:6379/0"
        JENGAHUB_API_KEY: "{{ .api_key }}"
        JWT_SECRET_KEY: "{{ .jwt_secret }}"
  data:
  - secretKey: db_password
    remoteRef:
      key: jengahub/database
      property: password
  - secretKey: redis_password
    remoteRef:
      key: jengahub/redis
      property: password
  - secretKey: api_key
    remoteRef:
      key: jengahub/api
      property: key
  - secretKey: jwt_secret
    remoteRef:
      key: jengahub/jwt
      property: secret